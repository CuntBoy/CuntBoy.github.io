<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Bao&#39;s blog</title>
  
  <subtitle>Tomorrow will be better</subtitle>
  <link href="http://example.com/atom.xml" rel="self"/>
  
  <link href="http://example.com/"/>
  <updated>2021-04-03T16:21:37.094Z</updated>
  <id>http://example.com/</id>
  
  <author>
    <name>Baozi</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>OSG踩坑记-默认光源</title>
    <link href="http://example.com/2021/04/04/OSG%E8%B8%A9%E5%9D%91%E8%AE%B0-%E9%BB%98%E8%AE%A4%E5%85%89%E6%BA%90/"/>
    <id>http://example.com/2021/04/04/OSG%E8%B8%A9%E5%9D%91%E8%AE%B0-%E9%BB%98%E8%AE%A4%E5%85%89%E6%BA%90/</id>
    <published>2021-04-03T16:10:50.000Z</published>
    <updated>2021-04-03T16:21:37.094Z</updated>
    
    <content type="html"><![CDATA[<h3 id="OSG-Viewer默认光源"><a href="#OSG-Viewer默认光源" class="headerlink" title="OSG-Viewer默认光源"></a>OSG-Viewer默认光源</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">osg::Node-&gt;getOrCreateStateSet()-&gt;setMode(GL_RESCALE_NORMAL, osg::StateAttribute::ON);    <span class="comment">// 法线随着模型大小变化而变化。</span></span><br><span class="line">osg::Node-&gt;getOrCreateStateSet()-&gt;setMode(GL_LIGHTING, osg::StateAttribute::OFF | osg::StateAttribute::OVERRIDE); <span class="comment">// 关闭节点光源 并遵从父节点的光照设置</span></span><br></pre></td></tr></table></figure><hr><h5 id="不指定法向-–-仍然可以看到-光照效果-但是无法看到明暗变化"><a href="#不指定法向-–-仍然可以看到-光照效果-但是无法看到明暗变化" class="headerlink" title="不指定法向 – 仍然可以看到 光照效果 但是无法看到明暗变化 "></a><code>不指定法向</code> – <font color="red">仍然可以看到 光照效果 但是无法看到明暗变化 </font></h5><h3 id="Viewer-默认光源的使用"><a href="#Viewer-默认光源的使用" class="headerlink" title="Viewer 默认光源的使用"></a>Viewer 默认光源的使用</h3><h4 id="1、设置光照的相关的信息"><a href="#1、设置光照的相关的信息" class="headerlink" title="1、设置光照的相关的信息"></a>1、设置光照的相关的信息</h4><ul><li><p><code>osg::Viewer默认存在缺省光源,但是需要进行部分设置,不然可能与你当前的场景不匹配</code></p></li><li><p>你需要设置的信息包括: ambient、diffuse、specular、光照方向（可以不设置，使用缺省的）、光照位置、光的衰减参数。</p></li></ul><blockquote><p>设置光照  – <font color="Green">衰减公式</font><br>$$<br>F = \frac{1}{(k_c + k_l<em>d + k_q</em>d^2)}<br>$$</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 获取缺省的光照</span></span><br><span class="line">osg::Light *light = viewer-&gt;getLight(); <span class="comment">// 从当前的查看器 获取光照设置 </span></span><br><span class="line">light-&gt;setAmbient(osg::Vec4(<span class="number">0.4</span>, <span class="number">0.4</span>, <span class="number">0.4</span>, <span class="number">1.0</span>));   <span class="comment">// 环境光   OPENGL的默认值是 osg::Vec3(0.2,0.2,0.2);</span></span><br><span class="line">light-&gt;setDiffuse(osg::Vec4(<span class="number">0.5</span>, <span class="number">0.5</span>, <span class="number">0.5</span>, <span class="number">1.0</span>));   <span class="comment">// 漫反射   直接来源于光源</span></span><br><span class="line">light-&gt;setSpecular(osg::Vec4(<span class="number">0.2</span>, <span class="number">0.2</span>, <span class="number">0.2</span>, <span class="number">1.0</span>));  <span class="comment">// specular   高光 此处给的很低  </span></span><br><span class="line"><span class="comment">// 由于此处我们使用的是平行光</span></span><br><span class="line"><span class="function">osg::Vec4 <span class="title">lightpos</span><span class="params">(x, y, z, <span class="number">0.0f</span>)</span></span>;   <span class="comment">// 记住: 平行光的位置的最后一个分量必须是 0 </span></span><br><span class="line">light-&gt;setPosition(lightpos);        <span class="comment">// 设置光照位置 </span></span><br><span class="line"><span class="comment">// 光照方向设置</span></span><br><span class="line"><span class="comment">// 需要用到高度角和方位角 -- 计算一个你需要方向 </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置光的衰减 -- 只设置 常量衰减的话 --   无距离衰减</span></span><br><span class="line">light-&gt;setConstantAttenuation(<span class="number">1.0f</span>);</span><br><span class="line">light-&gt;setLinearAttenuation(<span class="number">0.0f</span>);</span><br><span class="line">light-&gt;setQuadraticAttenuation(<span class="number">0.f</span>);</span><br></pre></td></tr></table></figure><p><font color="red"> 产生平行光，位置分量的第四分量必须是0 </font></p><h4 id="2、对节点设置好材料属性"><a href="#2、对节点设置好材料属性" class="headerlink" title="2、对节点设置好材料属性"></a>2、对节点设置好材料属性</h4><ul><li>材料的设置是针对你要显示的节点设置的、你可以创建一个材料并设置相关的颜色，这样就可以拥有一个更好的显示效果。</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;OSG-Viewer默认光源&quot;&gt;&lt;a href=&quot;#OSG-Viewer默认光源&quot; class=&quot;headerlink&quot; title=&quot;OSG-Viewer默认光源&quot;&gt;&lt;/a&gt;OSG-Viewer默认光源&lt;/h3&gt;&lt;figure class=&quot;highlight </summary>
      
    
    
    
    <category term="works" scheme="http://example.com/categories/works/"/>
    
    <category term="GF" scheme="http://example.com/categories/works/GF/"/>
    
    <category term="OSG" scheme="http://example.com/categories/works/GF/OSG/"/>
    
    
    <category term="cpp" scheme="http://example.com/tags/cpp/"/>
    
    <category term="osg" scheme="http://example.com/tags/osg/"/>
    
  </entry>
  
  <entry>
    <title>OSG踩坑记-模型共享&amp;模型颜色修改</title>
    <link href="http://example.com/2021/03/20/OSG%E8%B8%A9%E5%9D%91%E8%AE%B0-%E6%A8%A1%E5%9E%8B%E5%85%B1%E4%BA%AB-%E6%A8%A1%E5%9E%8B%E9%A2%9C%E8%89%B2%E4%BF%AE%E6%94%B9/"/>
    <id>http://example.com/2021/03/20/OSG%E8%B8%A9%E5%9D%91%E8%AE%B0-%E6%A8%A1%E5%9E%8B%E5%85%B1%E4%BA%AB-%E6%A8%A1%E5%9E%8B%E9%A2%9C%E8%89%B2%E4%BF%AE%E6%94%B9/</id>
    <published>2021-03-20T12:54:22.000Z</published>
    <updated>2021-03-21T07:20:00.906Z</updated>
    
    <content type="html"><![CDATA[<h3 id="简单概述"><a href="#简单概述" class="headerlink" title="简单概述"></a>简单概述</h3><p>在很多场景中，我们需要将同一个模型绘制到不同的区域并且还需要对模型进行一系列的旋转缩放等操作，同时需要使用不同的颜色，这个时候我们只需要使用一些简单的设置便可以实现这个功能功能。</p><h3 id="伪代码："><a href="#伪代码：" class="headerlink" title="伪代码："></a>伪代码：</h3><h4 id="1、读入模型"><a href="#1、读入模型" class="headerlink" title="1、读入模型"></a>1、读入模型</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 无论你是从外部读入模型 还是你自己构建的一个模型都是可以的。</span></span><br><span class="line"><span class="comment">// 使用osg自带读取模型的函数读取模型</span></span><br><span class="line"><span class="comment">// 推荐使用 osg 的智能指针</span></span><br><span class="line"><span class="comment">// 此处使用一个 内嵌的几何体 代替模型 </span></span><br><span class="line"></span><br><span class="line">osg::ref_ptr&lt;osg::Geometry&gt; geom = <span class="keyword">new</span> osg::Geometry; </span><br><span class="line"><span class="comment">// osg 的智能指针采用引用计数的方式决定当前对象是否释放</span></span><br></pre></td></tr></table></figure><h4 id="2、计算对模型的旋转、缩放、平移的操作矩阵"><a href="#2、计算对模型的旋转、缩放、平移的操作矩阵" class="headerlink" title="2、计算对模型的旋转、缩放、平移的操作矩阵"></a>2、计算对模型的旋转、缩放、平移的操作矩阵</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// osg 有专门用户模型操作的类  osg::MatrixTransform </span></span><br><span class="line"><span class="comment">// 创建一个对象 模型操作类中抽象了矩阵的接口 可以当做矩阵操作 本质上是一个节点 </span></span><br><span class="line">osg::ref_ptr&lt;osg::MatrixTransform&gt; trans = <span class="keyword">new</span> osg::MatrixTransform;</span><br><span class="line"><span class="comment">// 对于模型的操作，有PVM矩阵的意思 </span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建旋转矩阵 </span></span><br><span class="line">osg::Matrix matrix_rotate;</span><br><span class="line"><span class="comment">// 构建旋转，从osg坐标系的沿着Z轴方向转到X轴（都是正方向）  </span></span><br><span class="line">matrix_rotate.makeRotate(osg::vec3(<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>),osg::vec3(<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>));  <span class="comment">// 参数分别是两个方向向量 第一个参数是当前模型的方向 第二个参数是你需要旋转的方向</span></span><br><span class="line"><span class="comment">// 你也可以直接选择使用</span></span><br><span class="line">osg::Matrix::rotate(osg::Vec3(),osg::Vec3()); <span class="comment">// 输入的参数也可以是四元数  返回值是一个表示旋转的矩阵</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ==============================================================================================</span></span><br><span class="line"><span class="comment">// 也可以直接 设置最终的变换矩阵 </span></span><br><span class="line">trans-&gt;setMatrix(matrix_rotate * osg::Martix::scale(<span class="number">1.0</span>,<span class="number">1.0</span>,<span class="number">1.0</span>) * osg::translate(osg::Vec3()));</span><br><span class="line"><span class="comment">// trans 已经存储了 我们对于模型的操作 </span></span><br></pre></td></tr></table></figure><h4 id="3、对trans节点设置材料等属性"><a href="#3、对trans节点设置材料等属性" class="headerlink" title="3、对trans节点设置材料等属性"></a>3、对trans节点设置材料等属性</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建材质对象</span></span><br><span class="line">osg::Material* mat = <span class="keyword">new</span> osg::Material();</span><br><span class="line">mat-&gt;setColorMode(osg::Material::ColorMode::DIFFUSE);   <span class="comment">// 设置绘制颜色的模式 </span></span><br><span class="line">mat-&gt;setDiffuse(osg::Material::FRONT, osg::Vec4());      <span class="comment">// 设置此种模式下的颜色 </span></span><br><span class="line"></span><br><span class="line">trans-&gt;getOrCreateStateSet()-&gt;setAttribute(mat);        <span class="comment">// 将材质设置给 节点 </span></span><br></pre></td></tr></table></figure><h4 id="4、将对象作为节点添加"><a href="#4、将对象作为节点添加" class="headerlink" title="4、将对象作为节点添加"></a>4、将对象作为节点添加</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">trans.addchild(geom.get());</span><br></pre></td></tr></table></figure><h4 id="5、将操作节点添加到绘制的根节点或者是其他的叶节点"><a href="#5、将操作节点添加到绘制的根节点或者是其他的叶节点" class="headerlink" title="5、将操作节点添加到绘制的根节点或者是其他的叶节点"></a>5、将操作节点添加到绘制的根节点或者是其他的叶节点</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ......</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;简单概述&quot;&gt;&lt;a href=&quot;#简单概述&quot; class=&quot;headerlink&quot; title=&quot;简单概述&quot;&gt;&lt;/a&gt;简单概述&lt;/h3&gt;&lt;p&gt;在很多场景中，我们需要将同一个模型绘制到不同的区域并且还需要对模型进行一系列的旋转缩放等操作，同时需要使用不同的颜色，这个时</summary>
      
    
    
    
    <category term="works" scheme="http://example.com/categories/works/"/>
    
    <category term="GF" scheme="http://example.com/categories/works/GF/"/>
    
    <category term="OSG" scheme="http://example.com/categories/works/GF/OSG/"/>
    
    
    <category term="cpp" scheme="http://example.com/tags/cpp/"/>
    
    <category term="osg" scheme="http://example.com/tags/osg/"/>
    
  </entry>
  
  <entry>
    <title>Bug奇遇记-uint16_t</title>
    <link href="http://example.com/2021/03/19/Bug%E5%A5%87%E9%81%87%E8%AE%B0-uint16-t/"/>
    <id>http://example.com/2021/03/19/Bug%E5%A5%87%E9%81%87%E8%AE%B0-uint16-t/</id>
    <published>2021-03-19T12:47:11.000Z</published>
    <updated>2021-03-20T17:03:50.747Z</updated>
    
    <content type="html"><![CDATA[<h3 id="uint16-t"><a href="#uint16-t" class="headerlink" title="uint16_t"></a>uint16_t</h3><ul><li>标准定义中：</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">short</span>  <span class="keyword">uint16_t</span>; <span class="comment">// max == _UI16_MAX 0xffffu </span></span><br></pre></td></tr></table></figure><p><img src="/.com//uploads/uint16_t.png" alt="uint16_t"></p><h4 id="问题："><a href="#问题：" class="headerlink" title="问题："></a>问题：</h4><ul><li><font color="red">这是一个粗心的问题</font></li></ul><p>在我正在实现的功能中有一个数据遍历的部分，我使用了<code>uint16_t</code>类型作为索引的类型，但是<code>uint16_t</code>数据的最大值比较小，所以当基础数据量过大的时候，我们产生的索引会越过索引的最大范围，导致最终得到的索引不是实际需要的索引值，导致我最终绘制的图形不是正确的结果！</p><hr><h3 id="正确的结果展示："><a href="#正确的结果展示：" class="headerlink" title="正确的结果展示："></a>正确的结果展示：</h3><p><img src="../images/lum_arrow_2.png" alt="lum_2" title="result"></p><p><img src="../images/lum_arrow_1.png" alt="right result" title="Result"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;uint16-t&quot;&gt;&lt;a href=&quot;#uint16-t&quot; class=&quot;headerlink&quot; title=&quot;uint16_t&quot;&gt;&lt;/a&gt;uint16_t&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;标准定义中：&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlig</summary>
      
    
    
    
    <category term="works" scheme="http://example.com/categories/works/"/>
    
    <category term="GF" scheme="http://example.com/categories/works/GF/"/>
    
    <category term="data type" scheme="http://example.com/categories/works/GF/data-type/"/>
    
    <category term="bugs" scheme="http://example.com/categories/works/GF/data-type/bugs/"/>
    
    
    <category term="cpp" scheme="http://example.com/tags/cpp/"/>
    
    <category term="osg" scheme="http://example.com/tags/osg/"/>
    
  </entry>
  
  <entry>
    <title>迟到的毕业总结</title>
    <link href="http://example.com/2021/03/18/%E8%BF%9F%E5%88%B0%E7%9A%84%E6%AF%95%E4%B8%9A%E6%80%BB%E7%BB%93/"/>
    <id>http://example.com/2021/03/18/%E8%BF%9F%E5%88%B0%E7%9A%84%E6%AF%95%E4%B8%9A%E6%80%BB%E7%BB%93/</id>
    <published>2021-03-18T15:59:55.000Z</published>
    <updated>2021-03-19T12:42:23.854Z</updated>
    
    <content type="html"><![CDATA[<p> <font color="red">2020年</font>在三个月前结束了，这一年大家都收获了满满的经历。当然，我也是。我毕业了，从一个三流学校的渣子变成了社会末流的青年。开始了独属于我的关于这个时代的苟且！</p><p>​    离开前，大家都像是急于归乡的游子，对身后的这个城市不存半点留恋。</p><p>对于大学，我仿佛有千言万语，却是欲语还休 。不谈这个这个有些无聊的学校，关于大学，关于这四年，关于我自己，我希望它是美好的，会让我主动怀恋的！</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt; &lt;font color=&quot;red&quot;&gt;2020年&lt;/font&gt;在三个月前结束了，这一年大家都收获了满满的经历。当然，我也是。我毕业了，从一个三流学校的渣子变成了社会末流的青年。开始了独属于我的关于这个时代的苟且！&lt;/p&gt;
&lt;p&gt;​    离开前，大家都像是急于归乡的游子，对</summary>
      
    
    
    
    <category term="bun" scheme="http://example.com/categories/bun/"/>
    
    <category term="university" scheme="http://example.com/categories/bun/university/"/>
    
    
    <category term="university" scheme="http://example.com/tags/university/"/>
    
    <category term="conclusion" scheme="http://example.com/tags/conclusion/"/>
    
  </entry>
  
  <entry>
    <title>Boy</title>
    <link href="http://example.com/2021/03/16/baozi/"/>
    <id>http://example.com/2021/03/16/baozi/</id>
    <published>2021-03-16T13:53:58.000Z</published>
    <updated>2021-03-18T15:31:02.868Z</updated>
    
    <content type="html"><![CDATA[<h4 id="About-this-Blog"><a href="#About-this-Blog" class="headerlink" title="About this Blog"></a>About this Blog</h4><ul><li>个人博客，分享我的日常与一些工作内容</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;About-this-Blog&quot;&gt;&lt;a href=&quot;#About-this-Blog&quot; class=&quot;headerlink&quot; title=&quot;About this Blog&quot;&gt;&lt;/a&gt;About this Blog&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;个人博客，分享我的日常与</summary>
      
    
    
    
    <category term="bun" scheme="http://example.com/categories/bun/"/>
    
    <category term="life" scheme="http://example.com/categories/bun/life/"/>
    
    
    <category term="intraduce" scheme="http://example.com/tags/intraduce/"/>
    
  </entry>
  
</feed>
